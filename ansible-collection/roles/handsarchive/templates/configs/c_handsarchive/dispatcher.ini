[comm]
name=AppFactory
alias=ip:{{ hostvars[inventory_hostname]['private_ip_address'] }}:4348
alias=ip:*:4350
rule=ip:*:* pyrtcp0://$0:$1
performance=1
performancetimer=10000

[tcp]
port=4348
option.keepalive=30000/180000
option.logfile=d:\apps\c_handsarchive
option.islocal=1
option.compressbits=0
gatherstatistic=2

[tcpmux]
port=4350

[smemmux]
port=4350

[exe]
dbm=auxolapdbm.exe;d:\apps\logs\c_handsarchive
proxy=pyrdbmproxy2smem.exe;d:\apps\logs\c_handsarchive

[start]
proxy=HandsArchiveProxyServerInstance;s=d:\\apps\\configs\\c_handsarchive\\
dbm=HandsArchiveDummyInstance;s=d:\\apps\\configs\\c_handsarchive\\;s={{ stationname }}.C_HANDSARCHIVE.HandsArchiveDbmDummy
{% for instance in range(2, handsarchive_dbm_instance + 1) %}
dbm=HandsArchiveDbm{{ instance }}Instance;s=d:\\apps\\configs\\c_handsarchive\\;s={{ stationname }}.C_HANDSARCHIVE.HandsArchiveDbm{{ instance }}
{% endfor %}

[logger]
server=ip:{{ hercules_host }}:9322
station={{ stationname }}.C_HANDSARCHIVE.HandsArchive-{{ hostvars[inventory_hostname]['private_ip_address'].split('.')[-1] }}

[telemetry.targets]
hercules = true
gateway = true
[telemetry.gateway.conn-params]
address = ip:127.0.0.1:5447
instance = TelgatewayInstance
[telemetry.metrics.tags]
application = HandsArchive
environment = {{ hostvars[inventory_hostname].tags.Environment }}
name = {{ hostvars[inventory_hostname].tags.Name }}
instanceid = {{ hostvars[inventory_hostname].instance_id }}
platform = {{ hostvars[inventory_hostname].tags.Platform }}
zone = {{ hostvars[inventory_hostname].tags.Zone }}
station_name = {{ stationname }}.C_HANDSARCHIVE.HandsArchive-{{ hostvars[inventory_hostname]['private_ip_address'].split('.')[-1] }}
service_name = HandsArchive
[telemetry.metrics.filters.1]
regex = .*